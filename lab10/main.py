"""
–õ–µ–æ–Ω—Ç—å–µ–≤ –ê–Ω–¥—Ä–µ–π –ò–£7-14–ë

–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ10 ‚Äú–í—ã—á–∏—Å–ª–µ–Ω–∏–µ
–ø—Ä–∏–±–ª–∏–∂—ë–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞‚Äù
–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏–±–ª–∏–∂—ë–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞
–∏–∑–≤–µ—Å—Ç–Ω–æ–π, –∑–∞–¥–∞–Ω–Ω–æ–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ, —Ñ—É–Ω–∫—Ü–∏–∏ –¥–≤—É–º—è —Ä–∞–∑–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ (–ø–æ –≤–∞—Ä–∏–∞–Ω—Ç—É).
–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∑–≤–æ–ª—è—Ç—å –∑–∞–¥–∞—Ç—å –Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü –æ—Ç—Ä–µ–∑–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è, 
–∞ —Ç–∞–∫–∂–µ N1 –∏ N2 - –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–∫–æ–≤ —Ä–∞–∑–±–∏–µ–Ω–∏—è.
–î–∞–ª–µ–µ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–∞:

            N1 N2
    –ú–µ—Ç–æ–¥ 1 I1 I2
    –ú–µ—Ç–æ–¥ 2 I3 I4

–î–∞–ª–µ–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–π, –∑–∞–¥–∞–Ω–Ω–æ–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ, –ø–µ—Ä–≤–æ–æ–±—Ä–∞–∑–Ω–æ–π –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, 
–∫–∞–∫–æ–π –º–µ—Ç–æ–¥ —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º. –î–ª—è —ç—Ç–æ–≥–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã—á–∏—Å–ª–∏—Ç—å –∏ 
–æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—É—é –∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—É—é –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ –∏–∑ —á–µ—Ç—ã—Ä—ë—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π.
–ú–µ—Ç–æ–¥, –∏–∑–º–µ—Ä–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å –æ–¥–Ω–∏–º –∏–∑ —Ä–∞–∑–±–∏–µ–Ω–∏–π –¥–∞–ª–æ —Å–∞–º–æ–µ –±–ª–∏–∑–∫–æ–µ
–ø–µ—Ä–≤–æ–æ–±—Ä–∞–∑–Ω–æ–π –∑–Ω–∞—á–µ–Ω–∏–µ, —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º.
–ó–∞—Ç–µ–º –¥–ª—è –¥—Ä—É–≥–æ–≥–æ, –º–µ–Ω–µ–µ —Ç–æ—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞, –∏—Ç–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ 
—É—á–∞—Å—Ç–∫–æ–≤ —Ä–∞–∑–±–∏–µ–Ω–∏—è, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∞–ª –±—É–¥–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é, 
–Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–æ—Ä–º—É–ª—ã:
    ùêº(ùëÅ) ‚àí ùêº(2ùëÅ)| | < Œµ
–í—ã–≤–µ—Å—Ç–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ä–µ–∑–∫–æ–≤, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è
–µ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è.
"""


from utils import get_user_input, output_results, get_float_input
from compute_utils import compute_integrals, compute_errors, \
      compute_accurate_value, compute_n
from func import F
from integrals import right_rectangle_method, trapezoid_method


def main():
    start_value, finish_value, n1, n2 = get_user_input()
    i1, i2, i3, i4 = compute_integrals(start_value, finish_value, n1, n2)

    exact_value = F(finish_value) - F(start_value)
    abs_error_i1, abs_error_i2, abs_error_i3, abs_error_i4, \
        relative_error_i1, relative_error_i2, \
        relative_error_i3, relative_error_i4 = \
        compute_errors(i1, i2, i3, i4, exact_value)

    output_results(i1, i2, i3, i4, n1, n2)

    print('\n–¢–∞–±–ª–∏—Ü–∞ –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–µ–π:\n')
    output_results(abs_error_i1, abs_error_i2,
                   abs_error_i3, abs_error_i4, n1, n2)

    print('\n–¢–∞–±–ª–∏—Ü–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–µ–π:\n')
    output_results(relative_error_i1, relative_error_i2,
                   relative_error_i3, relative_error_i4, n1, n2)

    accurate_value, acurate_method = compute_accurate_value(
        abs_error_i1, abs_error_i2, abs_error_i3, abs_error_i4)

    print(f'–ù–∞–∏–±–æ–ª–µ–µ –º–∞–ª–µ–Ω—å–∫–∞—è –∞–±—Å. –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å: {accurate_value:.6g},'
          f'–Ω–∞–π–¥–µ–Ω–∞ {acurate_method}-–º —Å–ø–æ—Å–æ–±–æ–º')

    eps = get_float_input('–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è e: ')

    n = compute_n(acurate_method, start_value, finish_value, eps)
    print(f'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–∫–æ–≤ —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é {eps: .5g}: {n}')

    if acurate_method == 1:
        new_value = trapezoid_method(start_value, finish_value, n)

    else:
        new_value = right_rectangle_method(start_value, finish_value, n)

    print(f'\n–ü—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞ : {new_value:.10f}')
    print(f'–ö–æ—Ç–æ—Ä–æ–µ —É–¥–∞–ª–æ—Å—å –≤—ã—á–∏—Å–ª–∏—Ç—å –∑–∞ –∫–æ–ª-–≤–æ –æ—Ç—Ä–µ–∑–∫–æ–≤ {n}')


if __name__ == '__main__':
    main()
